openapi: 3.0.0
info:
  title: 외부 업체 출입 관리 시스템 API
  version: 2.1.0
  description: 외부 방문자 및 관리자를 위한 인증, 출입 관리, 설비 점검 API
servers:
  - url: http://localhost:3000/api
    description: 개발 서버

paths:
  # ===================
  # 인증 (Authentication)
  # ===================
  /auth/signup:
    post:
      summary: 새로운 사용자 계정 생성
      description: 방문자 또는 관리자를 시스템에 등록
      tags:
        - 인증 (Authentication)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: 사용자 이름
                  example: "홍길동"
                email:
                  type: string
                  format: email
                  description: 이메일 주소
                  example: "hong@example.com"
                password:
                  type: string
                  description: 비밀번호
                  example: "password123"
                phone:
                  type: string
                  description: 전화번호
                  example: "010-1234-5678"
                role:
                  type: string
                  enum: [visitor, admin]
                  description: 사용자 역할
                  example: "visitor"
              required: [name, email, password, phone, role]
      responses:
        '201':
          description: 회원가입 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "회원가입이 완료되었습니다."
                  data:
                    type: object
                    properties:
                      userId:
                        type: integer
                        example: 1
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/login:
    post:
      summary: 사용자 로그인
      description: 이메일과 비밀번호로 인증 후 JWT 발행
      tags:
        - 인증 (Authentication)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: 이메일 주소
                  example: "hong@example.com"
                password:
                  type: string
                  description: 비밀번호
                  example: "password123"
              required: [email, password]
      responses:
        '200':
          description: 로그인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  token:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  user:
                    $ref: '#/components/schemas/User'

  /auth/me:
    get:
      summary: 내 정보 조회
      description: 로그인된 사용자 프로필 조회
      tags:
        - 인증 (Authentication)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'

  /auth/email/verify/request:
    post:
      summary: 이메일 인증 요청
      description: 이메일로 인증 코드 발송
      tags:
        - 인증 (Authentication)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  example: "hong@example.com"
              required: [email]
      responses:
        '200':
          description: 요청 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /auth/email/verify/confirm:
    post:
      summary: 이메일 인증 코드 확인
      description: 수신한 인증 코드 검증
      tags:
        - 인증 (Authentication)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  example: "hong@example.com"
                code:
                  type: string
                  example: "123456"
              required: [email, code]
      responses:
        '200':
          description: 인증 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # ===================
  # 회사 관리 (Companies)
  # ===================
  /companies:
    get:
      summary: 회사 목록 조회
      description: 등록된 회사 목록을 조회
      tags:
        - 회사 관리 (Companies)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: 페이지 번호
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: 한 페이지당 항목 수
        - in: query
          name: search
          schema:
            type: string
          description: 회사명 검색
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      companies:
                        type: array
                        items:
                          $ref: '#/components/schemas/Company'
                      totalCount:
                        type: integer
                        example: 25
                      currentPage:
                        type: integer
                        example: 1
                      totalPages:
                        type: integer
                        example: 3

    post:
      summary: 회사 등록
      description: 새로운 회사를 시스템에 등록
      tags:
        - 회사 관리 (Companies)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "ABC 주식회사"
                registrationNo:
                  type: string
                  example: "123-45-67890"
                address:
                  type: string
                  example: "서울시 강남구 테헤란로 123"
                phone:
                  type: string
                  example: "02-1234-5678"
                email:
                  type: string
                  format: email
                  example: "contact@abc.com"
                contactPerson:
                  type: string
                  example: "김담당자"
                contactPhone:
                  type: string
                  example: "010-1234-5678"
                website:
                  type: string
                  example: "https://www.abc.com"
                companyType:
                  type: string
                  example: "설비점검업체"
              required: [name, registrationNo, contactPerson, contactPhone]
      responses:
        '201':
          description: 등록 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "회사가 등록되었습니다."
                  data:
                    type: object
                    properties:
                      companyId:
                        type: integer
                        example: 1

  /companies/{id}:
    get:
      summary: 회사 상세 정보 조회
      description: 특정 회사의 상세 정보를 조회
      tags:
        - 회사 관리 (Companies)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 회사 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Company'

    put:
      summary: 회사 정보 수정
      description: 기존 회사 정보를 수정
      tags:
        - 회사 관리 (Companies)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 회사 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "ABC 주식회사"
                address:
                  type: string
                  example: "서울시 강남구 테헤란로 123"
                phone:
                  type: string
                  example: "02-1234-5678"
                email:
                  type: string
                  format: email
                  example: "contact@abc.com"
                contactPerson:
                  type: string
                  example: "김담당자"
                contactPhone:
                  type: string
                  example: "010-1234-5678"
                website:
                  type: string
                  example: "https://www.abc.com"
                companyType:
                  type: string
                  example: "설비점검업체"
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # ===================
  # 프로필 관리 (Profiles)
  # ===================
  /profiles:
    get:
      summary: 내 프로필 조회
      description: 현재 사용자의 프로필 정보를 조회
      tags:
        - 프로필 관리 (Profiles)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Profile'

    post:
      summary: 프로필 생성
      description: 사용자 프로필을 생성
      tags:
        - 프로필 관리 (Profiles)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                companyId:
                  type: integer
                  example: 1
                jobTitle:
                  type: string
                  example: "설비점검원"
                department:
                  type: string
                  example: "기술팀"
                responsibilities:
                  type: string
                  example: "전기설비 점검 및 유지보수"
              required: [companyId, jobTitle]
      responses:
        '201':
          description: 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "프로필이 생성되었습니다."
                  data:
                    type: object
                    properties:
                      profileId:
                        type: integer
                        example: 1

    put:
      summary: 프로필 수정
      description: 사용자 프로필 정보를 수정
      tags:
        - 프로필 관리 (Profiles)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                jobTitle:
                  type: string
                  example: "수석 설비점검원"
                department:
                  type: string
                  example: "기술팀"
                responsibilities:
                  type: string
                  example: "전기설비 점검 및 유지보수, 신입사원 교육"
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # ===================
  # 방문 관리 (Visit Management)
  # ===================
  /visit/requests:
    post:
      summary: 방문 신청
      description: 외부 업체 사전 방문 신청
      tags:
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                purpose:
                  type: string
                  example: "설비 점검"
                location:
                  type: string
                  example: "A동 3층 전기실"
                startDate:
                  type: string
                  format: date
                  example: "2024-01-15"
                startTime:
                  type: string
                  example: "09:00"
                endDate:
                  type: string
                  format: date
                  example: "2024-01-15"
                endTime:
                  type: string
                  example: "17:00"
                vehicleNo:
                  type: string
                  example: "12가3456"
                contactPhone:
                  type: string
                  example: "010-1234-5678"
                visitors:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        example: "김방문자"
                      phone:
                        type: string
                        example: "010-9876-5432"
                      jobTitle:
                        type: string
                        example: "점검원"
              required: [purpose, location, startDate, startTime, endDate, endTime]
      responses:
        '201':
          description: 신청 접수 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "방문 신청이 접수되었습니다."
                  data:
                    type: object
                    properties:
                      visitId:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: "pending"

  /visit-request/me:
    get:
      summary: 내 방문 신청 목록 조회
      description: 로그인된 사용자가 자신의 방문 신청 내역 조회
      tags:
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, approved, rejected, cancelled]
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      visitRequests:
                        type: array
                        items:
                          $ref: '#/components/schemas/VisitRequest'
                      totalCount:
                        type: integer
                        example: 25
                      currentPage:
                        type: integer
                        example: 1
                      totalPages:
                        type: integer
                        example: 3

  /visit-request/{visitId}:
    get:
      summary: 방문 신청 상세 조회
      description: 특정 방문 신청의 상세 정보를 조회
      tags:
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: visitId
          schema:
            type: integer
          required: true
          description: 방문 신청 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/VisitRequest'

    put:
      summary: 방문 신청 수정
      description: 대기 중인 방문 신청을 수정
      tags:
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: visitId
          schema:
            type: integer
          required: true
          description: 방문 신청 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                purpose:
                  type: string
                  example: "설비 점검"
                location:
                  type: string
                  example: "B동 2층 기계실"
                startDate:
                  type: string
                  format: date
                  example: "2024-01-15"
                startTime:
                  type: string
                  example: "10:00"
                endDate:
                  type: string
                  format: date
                  example: "2024-01-15"
                endTime:
                  type: string
                  example: "16:00"
                vehicleNo:
                  type: string
                  example: "12가3456"
                contactPhone:
                  type: string
                  example: "010-1234-5678"
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

    delete:
      summary: 방문 신청 취소
      description: 대기 중인 방문 신청을 취소
      tags:
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: visitId
          schema:
            type: integer
          required: true
          description: 방문 신청 ID
      responses:
        '200':
          description: 취소 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /visit-requests/{visitId}/qrcode:
    get:
      summary: 방문자 QR 코드 조회
      description: 승인된 방문자가 자신의 QR 코드를 조회
      tags:
        - 방문 관리 (Visit Management)
        - QR 코드 (QR Code)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: visitId
          schema:
            type: integer
          required: true
          description: 방문 신청 ID
      responses:
        '200':
          description: QR 코드 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      qrCode:
                        type: string
                        example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
                      qrData:
                        type: string
                        example: "VISIT_REQ_001_20240115_APPROVED"
                      expiresAt:
                        type: string
                        format: date-time
                        example: "2024-01-15T23:59:59Z"

  # ===================
  # 관리자 기능 (Admin)
  # ===================
  /admin/visit-requests:
    get:
      summary: 전체 방문 신청 목록 조회 (관리자)
      description: 관리자가 모든 방문 신청을 조회
      tags:
        - 관리자 기능 (Admin)
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, approved, rejected, cancelled]
        - in: query
          name: company
          schema:
            type: string
          description: 회사명으로 필터링
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      visitRequests:
                        type: array
                        items:
                          $ref: '#/components/schemas/VisitRequestAdmin'
                      totalCount:
                        type: integer
                        example: 100
                      currentPage:
                        type: integer
                        example: 1
                      totalPages:
                        type: integer
                        example: 10

  /admin/visit-requests/{id}:
    get:
      summary: 방문 신청 상세 조회 (관리자)
      description: 관리자가 특정 방문 신청의 상세 정보를 조회
      tags:
        - 관리자 기능 (Admin)
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 방문 신청 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/VisitRequestAdmin'

  /admin/visit-requests/{id}/status:
    put:
      summary: 방문 신청 승인/반려 처리
      description: 관리자가 방문 신청을 승인하거나 반려
      tags:
        - 관리자 기능 (Admin)
        - 방문 관리 (Visit Management)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 방문 신청 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [approved, rejected]
                  example: "approved"
                comment:
                  type: string
                  example: "승인되었습니다. A동 출입구로 오시기 바랍니다."
                conditions:
                  type: string
                  example: "안전모 착용 필수"
              required: [status]
      responses:
        '200':
          description: 처리 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "방문 신청이 승인되었습니다."
                  data:
                    type: object
                    properties:
                      visitId:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: "approved"
                      qrGenerated:
                        type: boolean
                        example: true

  /admin/visit-requests/{id}/qrcode:
    post:
      summary: QR 코드 생성 요청
      description: 관리자가 승인된 방문에 대해 QR 코드를 생성
      tags:
        - 관리자 기능 (Admin)
        - QR 코드 (QR Code)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 방문 신청 ID
      responses:
        '201':
          description: QR 코드 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "QR 코드가 생성되었습니다."
                  data:
                    type: object
                    properties:
                      qrCodeId:
                        type: string
                        example: "QR_001_20240115"
                      qrCode:
                        type: string
                        example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."

  /admin/dashboard:
    get:
      summary: 관리자 대시보드
      description: 방문 현황, 통계 등 대시보드 데이터 조회
      tags:
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      todayVisits:
                        type: integer
                        example: 15
                      pendingRequests:
                        type: integer
                        example: 8
                      activeVisitors:
                        type: integer
                        example: 5
                      monthlyStats:
                        type: object
                        properties:
                          totalVisits:
                            type: integer
                            example: 120
                          approvedRequests:
                            type: integer
                            example: 98
                          rejectedRequests:
                            type: integer
                            example: 22
                      recentActivity:
                        type: array
                        items:
                          type: object
                          properties:
                            type:
                              type: string
                              example: "visit_request"
                            message:
                              type: string
                              example: "홍길동님이 방문 신청을 하였습니다."
                            timestamp:
                              type: string
                              format: date-time
                              example: "2024-01-15T10:30:00Z"

  # ===================
  # QR 및 출입 관리 (Entry Management)
  # ===================
  /qr/validate:
    post:
      summary: QR 코드 유효성 검증
      description: 스캔된 QR 코드의 유효성을 검증
      tags:
        - QR 코드 (QR Code)
        - 출입 관리 (Entry Management)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                qrData:
                  type: string
                  example: "VISIT_REQ_001_20240115_APPROVED"
                deviceId:
                  type: string
                  example: "GATE_001"
                location:
                  type: string
                  example: "A동 출입구"
              required: [qrData]
      responses:
        '200':
          description: 검증 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      valid:
                        type: boolean
                        example: true
                      visitRequest:
                        $ref: '#/components/schemas/VisitRequest'
                      visitor:
                        type: object
                        properties:
                          name:
                            type: string
                            example: "홍길동"
                          company:
                            type: string
                            example: "ABC 회사"
                          phone:
                            type: string
                            example: "010-1234-5678"

  /visit-entry/scan:
    post:
      summary: QR 스캔 처리
      description: QR 코드 스캔을 통한 출입 처리
      tags:
        - 출입 관리 (Entry Management)
        - QR 코드 (QR Code)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                qrData:
                  type: string
                  example: "VISIT_REQ_001_20240115_APPROVED"
                type:
                  type: string
                  enum: [entry, exit]
                  example: "entry"
                deviceId:
                  type: string
                  example: "GATE_001"
                location:
                  type: string
                  example: "A동 출입구"
              required: [qrData, type]
      responses:
        '200':
          description: 스캔 처리 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "출입이 승인되었습니다."
                  data:
                    type: object
                    properties:
                      entryLogId:
                        type: integer
                        example: 1
                      visitRequestId:
                        type: integer
                        example: 1
                      entryTime:
                        type: string
                        format: date-time
                        example: "2024-01-15T09:00:00Z"
                      visitor:
                        type: object
                        properties:
                          name:
                            type: string
                            example: "홍길동"
                          company:
                            type: string
                            example: "ABC 회사"

  /visit-entry/{id}/confirm:
    put:
      summary: 출입 승인 확인
      description: 관리자가 출입을 최종 승인 또는 거부
      tags:
        - 출입 관리 (Entry Management)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 출입 로그 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                approved:
                  type: boolean
                  example: true
                note:
                  type: string
                  example: "신분증 확인 완료"
              required: [approved]
      responses:
        '200':
          description: 승인 처리 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /visit-logs:
    get:
      summary: 출입 이력 조회
      description: 출입 로그 목록을 조회
      tags:
        - 출입 관리 (Entry Management)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
        - in: query
          name: type
          schema:
            type: string
            enum: [entry, exit]
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
        - in: query
          name: company
          schema:
            type: string
        - in: query
          name: visitor
          schema:
            type: string
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      logs:
                        type: array
                        items:
                          $ref: '#/components/schemas/VisitLog'
                      totalCount:
                        type: integer
                        example: 150
                      currentPage:
                        type: integer
                        example: 1
                      totalPages:
                        type: integer
                        example: 8

  # ===================
  # 설비 점검 관리 (Inspection)
  # ===================
  /inspection-templates:
    get:
      summary: 점검 템플릿 목록 조회
      description: 사용 가능한 점검 템플릿 목록을 조회
      tags:
        - 설비 점검 (Inspection)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: location
          schema:
            type: string
          description: 특정 위치 필터링
        - in: query
          name: category
          schema:
            type: string
          description: 설비 카테고리
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/InspectionTemplate'

    post:
      summary: 새 점검 템플릿 생성
      description: 관리자가 새로운 점검 템플릿을 생성
      tags:
        - 설비 점검 (Inspection)
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "전기 설비 점검 템플릿"
                description:
                  type: string
                  example: "A동 전기실 일반 점검 항목"
                location:
                  type: string
                  example: "A동 3층 전기실"
                category:
                  type: string
                  example: "전기설비"
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        example: "메인 분전반 상태 확인"
                      description:
                        type: string
                        example: "분전반 표시등 정상 작동 여부 확인"
                      type:
                        type: string
                        enum: [checkbox, text, number, photo]
                        example: "checkbox"
                      required:
                        type: boolean
                        example: true
                      options:
                        type: array
                        items:
                          type: string
                        example: ["정상", "이상", "점검 필요"]
              required: [name, location, category, items]
      responses:
        '201':
          description: 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "점검 템플릿이 생성되었습니다."
                  data:
                    type: object
                    properties:
                      templateId:
                        type: integer
                        example: 1

  /inspection-templates/{location}:
    get:
      summary: 특정 위치의 점검 템플릿 조회
      description: 특정 설비/장소에 대한 점검 템플릿을 조회
      tags:
        - 설비 점검 (Inspection)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: location
          schema:
            type: string
          required: true
          description: 점검 위치
          example: "A동3층전기실"
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/InspectionTemplate'

  /inspection-records:
    get:
      summary: 점검 기록 조회
      description: 설비별, 기간별, 담당자별 점검 이력을 조회
      tags:
        - 설비 점검 (Inspection)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
        - in: query
          name: location
          schema:
            type: string
        - in: query
          name: inspector
          schema:
            type: string
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
        - in: query
          name: status
          schema:
            type: string
            enum: [completed, incomplete, issue_found]
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      records:
                        type: array
                        items:
                          $ref: '#/components/schemas/InspectionRecord'
                      totalCount:
                        type: integer
                        example: 80
                      currentPage:
                        type: integer
                        example: 1
                      totalPages:
                        type: integer
                        example: 4

    post:
      summary: 점검 기록 생성
      description: 점검 체크리스트 기반으로 새로운 점검 기록을 생성
      tags:
        - 설비 점검 (Inspection)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                visitRequestId:
                  type: integer
                  example: 1
                templateId:
                  type: integer
                  example: 1
                location:
                  type: string
                  example: "A동 3층 전기실"
                inspectionData:
                  type: array
                  items:
                    type: object
                    properties:
                      itemId:
                        type: integer
                        example: 1
                      itemName:
                        type: string
                        example: "메인 분전반 상태 확인"
                      value:
                        type: string
                        example: "정상"
                      notes:
                        type: string
                        example: "모든 표시등 정상 작동 확인"
                      photoIds:
                        type: array
                        items:
                          type: integer
                        example: [1, 2]
                overallStatus:
                  type: string
                  enum: [completed, incomplete, issue_found]
                  example: "completed"
                generalNotes:
                  type: string
                  example: "전반적으로 양호한 상태"
              required: [templateId, location, inspectionData, overallStatus]
      responses:
        '201':
          description: 기록 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "점검 기록이 저장되었습니다."
                  data:
                    type: object
                    properties:
                      recordId:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: "completed"

  /inspection-records/{id}:
    get:
      summary: 점검 기록 상세 조회
      description: 특정 점검 기록의 상세 내용을 조회
      tags:
        - 설비 점검 (Inspection)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 점검 기록 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/InspectionRecord'

  /inspection-photos:
    post:
      summary: 점검 사진 업로드
      description: 점검 과정에서 촬영한 사진을 업로드
      tags:
        - 설비 점검 (Inspection)
        - 파일 업로드 (File Upload)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                photo:
                  type: string
                  format: binary
                  description: 업로드할 이미지 파일
                description:
                  type: string
                  example: "분전반 상태 사진"
                location:
                  type: string
                  example: "A동 3층 전기실"
              required: [photo]
      responses:
        '201':
          description: 업로드 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "사진이 업로드되었습니다."
                  data:
                    type: object
                    properties:
                      photoId:
                        type: integer
                        example: 1
                      photoUrl:
                        type: string
                        example: "https://storage.example.com/photos/inspection_001.jpg"
                      thumbnailUrl:
                        type: string
                        example: "https://storage.example.com/photos/thumbs/inspection_001.jpg"

  /inspection-access:
    get:
      summary: 점검 권한 조회
      description: 현재 사용자의 점검 권한 목록을 조회
      tags:
        - 설비 점검 (Inspection)
        - 권한 관리 (Access Control)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        location:
                          type: string
                          example: "A동 3층 전기실"
                        category:
                          type: string
                          example: "전기설비"
                        accessLevel:
                          type: string
                          enum: [read, write, admin]
                          example: "write"
                        grantedAt:
                          type: string
                          format: date-time
                          example: "2024-01-01T00:00:00Z"

    post:
      summary: 점검 권한 부여
      description: 관리자가 사용자에게 특정 설비 점검 권한을 부여
      tags:
        - 설비 점검 (Inspection)
        - 권한 관리 (Access Control)
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  type: integer
                  example: 1
                location:
                  type: string
                  example: "A동 3층 전기실"
                category:
                  type: string
                  example: "전기설비"
                accessLevel:
                  type: string
                  enum: [read, write, admin]
                  example: "write"
                expiresAt:
                  type: string
                  format: date-time
                  example: "2024-12-31T23:59:59Z"
              required: [userId, location, accessLevel]
      responses:
        '201':
          description: 권한 부여 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /inspection-access/{location}:
    get:
      summary: 특정 설비 점검 권한 확인
      description: 사용자가 특정 설비 점검 가능 여부를 확인
      tags:
        - 설비 점검 (Inspection)
        - 권한 관리 (Access Control)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: location
          schema:
            type: string
          required: true
          description: 점검 위치
          example: "A동3층전기실"
      responses:
        '200':
          description: 권한 확인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      hasAccess:
                        type: boolean
                        example: true
                      accessLevel:
                        type: string
                        enum: [read, write, admin]
                        example: "write"
                      location:
                        type: string
                        example: "A동 3층 전기실"
                      category:
                        type: string
                        example: "전기설비"

  # ===================
  # 데이터 내보내기 (Export)
  # ===================
  /export/visit-records:
    get:
      summary: 방문 기록 엑셀 내보내기
      description: 방문 기록을 엑셀 파일로 내보내기
      tags:
        - 데이터 내보내기 (Export)
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
          description: 시작 날짜
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
          description: 종료 날짜
        - in: query
          name: company
          schema:
            type: string
          description: 회사명 필터
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, approved, rejected, cancelled]
          description: 상태 필터
        - in: query
          name: format
          schema:
            type: string
            enum: [excel, csv]
            default: excel
          description: 파일 형식
      responses:
        '200':
          description: 내보내기 성공
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
                format: binary

  /export/inspection-records:
    get:
      summary: 점검 기록 내보내기
      description: 점검 기록을 엑셀 또는 CSV로 내보내기
      tags:
        - 데이터 내보내기 (Export)
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
        - in: query
          name: location
          schema:
            type: string
        - in: query
          name: inspector
          schema:
            type: string
        - in: query
          name: status
          schema:
            type: string
            enum: [completed, incomplete, issue_found]
        - in: query
          name: format
          schema:
            type: string
            enum: [excel, csv]
            default: excel
      responses:
        '200':
          description: 내보내기 성공
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
                format: binary

  # ===================
  # 카테고리 관리 (Categories)
  # ===================
  /categories:
    get:
      summary: 점검 카테고리 목록 조회
      description: 시스템에 등록된 점검 카테고리 목록을 조회
      tags:
        - 카테고리 관리 (Categories)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: "전기설비"
                        description:
                          type: string
                          example: "전기 관련 설비 점검"
                        color:
                          type: string
                          example: "#FF5722"
                        active:
                          type: boolean
                          example: true
    post:
      summary: 새 점검 카테고리 생성
      description: 관리자가 새로운 점검 카테고리를 생성
      tags:
        - 카테고리 관리 (Categories)
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "소방설비"
                description:
                  type: string
                  example: "소방 관련 설비 점검"
                color:
                  type: string
                  example: "#F44336"
              required: [name]
      responses:
        '201':
          description: 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "카테고리가 생성되었습니다."
                  data:
                    type: object
                    properties:
                      categoryId:
                        type: integer
                        example: 1

  /categories/{id}:
    put:
      summary: 점검 카테고리 수정
      description: 기존 점검 카테고리 정보를 수정
      tags:
        - 카테고리 관리 (Categories)
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 카테고리 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "전기설비"
                description:
                  type: string
                  example: "전기 관련 설비 점검 (수정됨)"
                color:
                  type: string
                  example: "#FF5722"
                active:
                  type: boolean
                  example: true
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
    delete:
      summary: 점검 카테고리 삭제
      description: 점검 카테고리를 삭제 (사용 중인 카테고리는 삭제 불가)
      tags:
        - 카테고리 관리 (Categories)
        - 관리자 기능 (Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 카테고리 ID
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '409':
          description: 사용 중인 카테고리로 삭제 불가
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ===================
  # SMS 인증 (SMS Verification)
  # ===================
  /auth/sms/verify/request:
    post:
      summary: SMS 인증 요청
      description: 휴대폰 번호로 인증 코드 발송
      tags:
        - 인증 (Authentication)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phone:
                  type: string
                  example: "010-1234-5678"
              required: [phone]
      responses:
        '200':
          description: 요청 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "인증 코드가 발송되었습니다."
        '400':
          description: 잘못된 전화번호
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/sms/verify/confirm:
    post:
      summary: SMS 인증 코드 확인
      description: 수신한 SMS 인증 코드 검증
      tags:
        - 인증 (Authentication)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phone:
                  type: string
                  example: "010-1234-5678"
                code:
                  type: string
                  example: "123456"
              required: [phone, code]
      responses:
        '200':
          description: 인증 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 잘못된 인증 코드
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ===================
  # 알림 시스템 (Notifications)
  # ===================
  /notifications:
    get:
      summary: 알림 목록 조회
      description: 사용자의 알림 목록을 조회
      tags:
        - 알림 (Notifications)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
        - in: query
          name: unreadOnly
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      notifications:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      unreadCount:
                        type: integer
                        example: 5
                      totalCount:
                        type: integer
                        example: 25
                      currentPage:
                        type: integer
                        example: 1
                      totalPages:
                        type: integer
                        example: 2

  /notifications/{id}/read:
    put:
      summary: 알림 읽음 처리
      description: 특정 알림을 읽음으로 표시
      tags:
        - 알림 (Notifications)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 알림 ID
      responses:
        '200':
          description: 처리 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /notifications/read-all:
    put:
      summary: 모든 알림 읽음 처리
      description: 사용자의 모든 알림을 읽음으로 표시
      tags:
        - 알림 (Notifications)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 처리 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # ===================
  # 점검 보고서 (Inspection Reports)
  # ===================
  /inspection-reports:
    get:
      summary: 점검 보고서 목록 조회
      description: 생성된 점검 보고서 목록을 조회
      tags:
        - 점검 보고서 (Inspection Reports)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
        - in: query
          name: status
          schema:
            type: string
            enum: [draft, completed, published]
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      reports:
                        type: array
                        items:
                          $ref: '#/components/schemas/InspectionReport'
                      totalCount:
                        type: integer
                        example: 15
                      currentPage:
                        type: integer
                        example: 1
                      totalPages:
                        type: integer
                        example: 2
    post:
      summary: 점검 보고서 생성
      description: 점검 기록을 기반으로 보고서를 생성
      tags:
        - 점검 보고서 (Inspection Reports)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  example: "A동 전기실 월간 점검 보고서"
                period:
                  type: string
                  example: "2024-01"
                inspectionRecordIds:
                  type: array
                  items:
                    type: integer
                  example: [1, 2, 3, 4, 5]
                templateId:
                  type: integer
                  example: 1
                summary:
                  type: string
                  example: "2024년 1월 A동 전기실 정기 점검 결과"
              required: [title, period, inspectionRecordIds]
      responses:
        '201':
          description: 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "점검 보고서가 생성되었습니다."
                  data:
                    type: object
                    properties:
                      reportId:
                        type: integer
                        example: 1

  /inspection-reports/{id}:
    get:
      summary: 점검 보고서 상세 조회
      description: 특정 점검 보고서의 상세 정보를 조회
      tags:
        - 점검 보고서 (Inspection Reports)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 보고서 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/InspectionReport'

  /inspection-reports/{id}/pdf:
    get:
      summary: 점검 보고서 PDF 다운로드
      description: 점검 보고서를 PDF 형태로 다운로드
      tags:
        - 점검 보고서 (Inspection Reports)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: 보고서 ID
      responses:
        '200':
          description: PDF 다운로드 성공
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '404':
          description: 보고서를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "오류가 발생했습니다."
        error:
          type: string
          example: "VALIDATION_ERROR"
      required: [success, message]

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "처리가 완료되었습니다."
      required: [success, message]

    User:
      type: object
      properties:
        userId:
          type: integer
          example: 1
        name:
          type: string
          example: "홍길동"
        email:
          type: string
          example: "hong@example.com"
        phone:
          type: string
          example: "010-1234-5678"
        role:
          type: string
          enum: [visitor, admin]
          example: "visitor"
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
      required: [userId, name, email, phone, role]

    Company:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "ABC 주식회사"
        registrationNo:
          type: string
          example: "123-45-67890"
        address:
          type: string
          example: "서울시 강남구 테헤란로 123"
        phone:
          type: string
          example: "02-1234-5678"
        email:
          type: string
          example: "contact@abc.com"
        contactPerson:
          type: string
          example: "김담당자"
        contactPhone:
          type: string
          example: "010-1234-5678"
        website:
          type: string
          example: "https://www.abc.com"
        companyType:
          type: string
          example: "설비점검업체"
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
      required: [id, name, registrationNo, contactPerson, contactPhone]

    Profile:
      type: object
      properties:
        id:
          type: integer
          example: 1
        userId:
          type: integer
          example: 1
        companyId:
          type: integer
          example: 1
        jobTitle:
          type: string
          example: "설비점검원"
        department:
          type: string
          example: "기술팀"
        role:
          type: string
          example: "inspector"
        responsibilities:
          type: string
          example: "전기설비 점검 및 유지보수"
        company:
          $ref: '#/components/schemas/Company'
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
      required: [id, userId, companyId, jobTitle]

    VisitRequest:
      type: object
      properties:
        visitId:
          type: integer
          example: 1
        profileId:
          type: integer
          example: 1
        companyId:
          type: integer
          example: 1
        purpose:
          type: string
          example: "설비 점검"
        location:
          type: string
          example: "A동 3층 전기실"
        startDate:
          type: string
          format: date
          example: "2024-01-15"
        startTime:
          type: string
          example: "09:00"
        endDate:
          type: string
          format: date
          example: "2024-01-15"
        endTime:
          type: string
          example: "17:00"
        vehicleNo:
          type: string
          example: "12가3456"
        contactPhone:
          type: string
          example: "010-1234-5678"
        status:
          type: string
          enum: [pending, approved, rejected, cancelled]
          example: "pending"
        requestedAt:
          type: string
          format: date-time
          example: "2024-01-10T10:30:00Z"
        reviewedAt:
          type: string
          format: date-time
          example: "2024-01-11T14:20:00Z"
      required: [visitId, profileId, companyId, purpose, location, startDate, startTime, endDate, endTime, status, requestedAt]

    VisitRequestAdmin:
      allOf:
        - $ref: '#/components/schemas/VisitRequest'
        - type: object
          properties:
            visitor:
              type: object
              properties:
                name:
                  type: string
                  example: "홍길동"
                phone:
                  type: string
                  example: "010-1234-5678"
                email:
                  type: string
                  example: "hong@example.com"
            company:
              $ref: '#/components/schemas/Company'
            feedback:
              type: array
              items:
                type: object
                properties:
                  type:
                    type: string
                    enum: [approval, rejection, comment]
                    example: "approval"
                  comment:
                    type: string
                    example: "승인되었습니다."
                  reviewerId:
                    type: integer
                    example: 2
                  reviewerName:
                    type: string
                    example: "관리자"
                  createdAt:
                    type: string
                    format: date-time
                    example: "2024-01-11T14:20:00Z"

    VisitLog:
      type: object
      properties:
        id:
          type: integer
          example: 1
        requestId:
          type: integer
          example: 1
        type:
          type: string
          enum: [entry, exit]
          example: "entry"
        scannedAt:
          type: string
          format: date-time
          example: "2024-01-15T09:00:00Z"
        deviceId:
          type: string
          example: "GATE_001"
        location:
          type: string
          example: "A동 출입구"
        visitor:
          type: object
          properties:
            name:
              type: string
              example: "홍길동"
            company:
              type: string
              example: "ABC 회사"
            phone:
              type: string
              example: "010-1234-5678"
      required: [id, requestId, type, scannedAt]

    InspectionTemplate:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "전기 설비 점검 템플릿"
        description:
          type: string
          example: "A동 전기실 일반 점검 항목"
        location:
          type: string
          example: "A동 3층 전기실"
        category:
          type: string
          example: "전기설비"
        items:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              name:
                type: string
                example: "메인 분전반 상태 확인"
              description:
                type: string
                example: "분전반 표시등 정상 작동 여부 확인"
              type:
                type: string
                enum: [checkbox, text, number, photo]
                example: "checkbox"
              required:
                type: boolean
                example: true
              options:
                type: array
                items:
                  type: string
                example: ["정상", "이상", "점검 필요"]
              order:
                type: integer
                example: 1
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
        updatedAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
      required: [id, name, location, category, items]

    InspectionRecord:
      type: object
      properties:
        id:
          type: integer
          example: 1
        visitRequestId:
          type: integer
          example: 1
        templateId:
          type: integer
          example: 1
        profileId:
          type: integer
          example: 1
        location:
          type: string
          example: "A동 3층 전기실"
        inspectionData:
          type: array
          items:
            type: object
            properties:
              itemId:
                type: integer
                example: 1
              itemName:
                type: string
                example: "메인 분전반 상태 확인"
              value:
                type: string
                example: "정상"
              notes:
                type: string
                example: "모든 표시등 정상 작동 확인"
              photos:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 1
                    url:
                      type: string
                      example: "https://storage.example.com/photos/inspection_001.jpg"
                    thumbnailUrl:
                      type: string
                      example: "https://storage.example.com/photos/thumbs/inspection_001.jpg"
                    description:
                      type: string
                      example: "분전반 상태 사진"
        overallStatus:
          type: string
          enum: [completed, incomplete, issue_found]
          example: "completed"
        generalNotes:
          type: string
          example: "전반적으로 양호한 상태"
        checkedAt:
          type: string
          format: date-time
          example: "2024-01-15T14:30:00Z"
        inspector:
          type: object
          properties:
            name:
              type: string
              example: "홍길동"
            company:
              type: string
              example: "ABC 회사"
            jobTitle:
              type: string
              example: "설비점검원"
        template:
          $ref: '#/components/schemas/InspectionTemplate'
        createdAt:
          type: string
          format: date-time
          example: "2024-01-15T14:30:00Z"
      required: [id, templateId, profileId, location, inspectionData, overallStatus, checkedAt]

    Category:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "전기설비"
        description:
          type: string
          example: "전기 관련 설비 점검"
        color:
          type: string
          example: "#FF5722"
        active:
          type: boolean
          example: true
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
      required: [id, name, active]
    
    Notification:
      type: object
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: "방문 신청이 승인되었습니다"
        message:
          type: string
          example: "2024-01-15 A동 전기실 방문이 승인되었습니다."
        type:
          type: string
          enum: [visit_approved, visit_rejected, inspection_due, system]
          example: "visit_approved"
        read:
          type: boolean
          example: false
        createdAt:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
      required: [id, title, message, type, read, createdAt]
    
    InspectionReport:
      type: object
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: "A동 전기실 월간 점검 보고서"
        period:
          type: string
          example: "2024-01"
        summary:
          type: string
          example: "2024년 1월 A동 전기실 정기 점검 결과"
        status:
          type: string
          enum: [draft, completed, published]
          example: "completed"
        inspectionRecords:
          type: array
          items:
            $ref: '#/components/schemas/InspectionRecord'
        createdAt:
          type: string
          format: date-time
          example: "2024-01-31T17:00:00Z"
        updatedAt:
          type: string
          format: date-time
          example: "2024-01-31T17:00:00Z"
      required: [id, title, period, status, createdAt]

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT 토큰을 사용한 인증